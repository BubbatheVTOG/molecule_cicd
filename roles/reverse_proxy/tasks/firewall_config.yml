- name: Check that firewalld is installed
  yum:
    name: firewalld
    state: present

- name: Check that firewalld is started
  systemd:
    service: firewalld
    state: started

- name: Open port 80/tcp
  firewalld:
    port: 80/tcp
    state: enabled
  register:
    firewall

- name: Reload firewalld
  systemd:
    service: firewalld
    state: restarted
  when:
    firewall.changed
